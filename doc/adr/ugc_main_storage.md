# ADR UGC Main Storage

## Проблема

Подобрать базу данных для хранения контента, генерируемого пользователями (Рицензии, рейтинг, закладки, комментарии)

## Варианты решения

- MongoDB
- Postgresql

## Подход к тестированию

Тестирование производилось путем записи и чтения 500 тыс, 5 млн и 15 млн записей в базы данных.

## Результаты тестирования

- 500_000 записей

|   /    | MongoDB | Postgresql |
|:------:|:-------:|:----------:|
| Запись |   6.80c   |    11.08c    |
| Чтение |   1.90с   |    1.40с     |

- 5_000_000 записей

|   /    | MongoDB | Postgresql |
|:------:|:-------:|:----------:|
| Запись |   68.07c   |    111.70c    |
| Чтение |   22.96с   |    12.60c     |

- 15_000_000 записей

|   /    | MongoDB | Postgresql |
|:------:|:-------:|:----------:|
| Запись |   208.34c   |    339.01c    |
| Чтение |   80.61с   |    42.28с     |
| Размер данных | 1.9 ГБ | 3.2 ГБ |


## Принятое решение

- MongoDB

## Комментарии

По скорости записи и по занимаему пространству на жёстком диске MongoDB показала себя лучше.
В том числе была расмотрена возможность MongoDB сохранять все данные в одну коллекцию
и придерживаться более гибкой структуры документов.

## Участники принятия решения

Леонид, Михаил, Павел, Ярослав

## Дата

22 Августа 2023г
